<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>2 Problem of Points | Gambling Statistics</title>
  <meta name="description" content="Notes on topics pertaining to gambling and expected outcomes using statistics and computer analysis." />
  <meta name="generator" content="bookdown 0.21 and GitBook 2.6.7" />

  <meta property="og:title" content="2 Problem of Points | Gambling Statistics" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="Notes on topics pertaining to gambling and expected outcomes using statistics and computer analysis." />
  <meta name="github-repo" content="rstudio/bookdown-demo" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="2 Problem of Points | Gambling Statistics" />
  
  <meta name="twitter:description" content="Notes on topics pertaining to gambling and expected outcomes using statistics and computer analysis." />
  

<meta name="author" content="Dan Rogers" />


<meta name="date" content="2020-10-22" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="flipping-a-coin.html"/>
<link rel="next" href="roulette.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/accessible-code-block-0.0.1/empty-anchor.js"></script>


<style type="text/css">
code.sourceCode > span { display: inline-block; line-height: 1.25; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./index.html">Gambling Statistics</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Introduction</a></li>
<li class="chapter" data-level="1" data-path="flipping-a-coin.html"><a href="flipping-a-coin.html"><i class="fa fa-check"></i><b>1</b> Flipping a Coin (and Basic Probabilities)</a><ul>
<li class="chapter" data-level="1.1" data-path="flipping-a-coin.html"><a href="flipping-a-coin.html#overview"><i class="fa fa-check"></i><b>1.1</b> Overview</a></li>
<li class="chapter" data-level="1.2" data-path="flipping-a-coin.html"><a href="flipping-a-coin.html#payouts-for-unfair-coins"><i class="fa fa-check"></i><b>1.2</b> Payouts for Unfair Coins</a></li>
<li class="chapter" data-level="1.3" data-path="flipping-a-coin.html"><a href="flipping-a-coin.html#inferring-the-bias-of-a-coin"><i class="fa fa-check"></i><b>1.3</b> Inferring the Bias of a Coin</a><ul>
<li class="chapter" data-level="1.3.1" data-path="flipping-a-coin.html"><a href="flipping-a-coin.html#maximum-likelihood-estimates"><i class="fa fa-check"></i><b>1.3.1</b> Maximum Likelihood Estimates</a></li>
<li class="chapter" data-level="1.3.2" data-path="flipping-a-coin.html"><a href="flipping-a-coin.html#getting-bayesian-with-it"><i class="fa fa-check"></i><b>1.3.2</b> Getting Bayesian With It</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2" data-path="problem-of-points.html"><a href="problem-of-points.html"><i class="fa fa-check"></i><b>2</b> Problem of Points</a><ul>
<li class="chapter" data-level="2.1" data-path="problem-of-points.html"><a href="problem-of-points.html#overview-1"><i class="fa fa-check"></i><b>2.1</b> Overview</a></li>
<li class="chapter" data-level="2.2" data-path="problem-of-points.html"><a href="problem-of-points.html#solution"><i class="fa fa-check"></i><b>2.2</b> Solution</a></li>
<li class="chapter" data-level="2.3" data-path="problem-of-points.html"><a href="problem-of-points.html#inferring-a-players-advantage"><i class="fa fa-check"></i><b>2.3</b> Inferring a Player’s Advantage</a></li>
<li class="chapter" data-level="2.4" data-path="problem-of-points.html"><a href="problem-of-points.html#historical-notes"><i class="fa fa-check"></i><b>2.4</b> Historical Notes</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="roulette.html"><a href="roulette.html"><i class="fa fa-check"></i><b>3</b> Roulette</a></li>
<li class="chapter" data-level="4" data-path="craps.html"><a href="craps.html"><i class="fa fa-check"></i><b>4</b> Craps</a><ul>
<li class="chapter" data-level="4.1" data-path="craps.html"><a href="craps.html#dice-odds"><i class="fa fa-check"></i><b>4.1</b> Dice Odds</a></li>
<li class="chapter" data-level="4.2" data-path="craps.html"><a href="craps.html#single-roll-proposition-bets"><i class="fa fa-check"></i><b>4.2</b> Single Roll (proposition) Bets</a><ul>
<li class="chapter" data-level="4.2.1" data-path="craps.html"><a href="craps.html#service-bets"><i class="fa fa-check"></i><b>4.2.1</b> Service Bets</a></li>
<li class="chapter" data-level="4.2.2" data-path="craps.html"><a href="craps.html#ce"><i class="fa fa-check"></i><b>4.2.2</b> C&amp;E</a></li>
<li class="chapter" data-level="4.2.3" data-path="craps.html"><a href="craps.html#field"><i class="fa fa-check"></i><b>4.2.3</b> Field</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="craps.html"><a href="craps.html#multi-roll-bets"><i class="fa fa-check"></i><b>4.3</b> Multi-Roll Bets</a><ul>
<li class="chapter" data-level="4.3.1" data-path="craps.html"><a href="craps.html#big-6-big-8"><i class="fa fa-check"></i><b>4.3.1</b> Big 6 &amp; Big 8</a></li>
<li class="chapter" data-level="4.3.2" data-path="craps.html"><a href="craps.html#hard-way-bets"><i class="fa fa-check"></i><b>4.3.2</b> Hard-Way Bets</a></li>
<li class="chapter" data-level="4.3.3" data-path="craps.html"><a href="craps.html#place-bets"><i class="fa fa-check"></i><b>4.3.3</b> Place Bets</a></li>
<li class="chapter" data-level="4.3.4" data-path="craps.html"><a href="craps.html#buy-bets"><i class="fa fa-check"></i><b>4.3.4</b> Buy Bets</a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="craps.html"><a href="craps.html#line-bets"><i class="fa fa-check"></i><b>4.4</b> Line Bets</a><ul>
<li class="chapter" data-level="4.4.1" data-path="craps.html"><a href="craps.html#pass-line"><i class="fa fa-check"></i><b>4.4.1</b> Pass Line</a></li>
<li class="chapter" data-level="4.4.2" data-path="craps.html"><a href="craps.html#pass-odds"><i class="fa fa-check"></i><b>4.4.2</b> Pass odds</a></li>
<li class="chapter" data-level="4.4.3" data-path="craps.html"><a href="craps.html#dont-pass"><i class="fa fa-check"></i><b>4.4.3</b> Don’t Pass</a></li>
<li class="chapter" data-level="4.4.4" data-path="craps.html"><a href="craps.html#dont-pass-odds"><i class="fa fa-check"></i><b>4.4.4</b> Don’t Pass Odds</a></li>
</ul></li>
<li class="chapter" data-level="4.5" data-path="craps.html"><a href="craps.html#summary"><i class="fa fa-check"></i><b>4.5</b> Summary</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="baccarat.html"><a href="baccarat.html"><i class="fa fa-check"></i><b>5</b> Baccarat</a><ul>
<li class="chapter" data-level="5.1" data-path="baccarat.html"><a href="baccarat.html#overview-2"><i class="fa fa-check"></i><b>5.1</b> Overview</a></li>
<li class="chapter" data-level="5.2" data-path="baccarat.html"><a href="baccarat.html#simulation"><i class="fa fa-check"></i><b>5.2</b> Simulation</a></li>
<li class="chapter" data-level="5.3" data-path="baccarat.html"><a href="baccarat.html#card-counting"><i class="fa fa-check"></i><b>5.3</b> Card Counting</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="blackjack.html"><a href="blackjack.html"><i class="fa fa-check"></i><b>6</b> Blackjack</a><ul>
<li class="chapter" data-level="6.1" data-path="blackjack.html"><a href="blackjack.html#introduction-1"><i class="fa fa-check"></i><b>6.1</b> Introduction</a></li>
<li class="chapter" data-level="6.2" data-path="blackjack.html"><a href="blackjack.html#basic-strategy"><i class="fa fa-check"></i><b>6.2</b> Basic Strategy</a></li>
<li class="chapter" data-level="6.3" data-path="blackjack.html"><a href="blackjack.html#simulation-analysis"><i class="fa fa-check"></i><b>6.3</b> Simulation &amp; Analysis</a><ul>
<li class="chapter" data-level="6.3.1" data-path="blackjack.html"><a href="blackjack.html#expected-returns"><i class="fa fa-check"></i><b>6.3.1</b> Expected Returns</a></li>
<li class="chapter" data-level="6.3.2" data-path="blackjack.html"><a href="blackjack.html#probability-of-blackjack"><i class="fa fa-check"></i><b>6.3.2</b> Probability of Blackjack</a></li>
</ul></li>
<li class="chapter" data-level="6.4" data-path="blackjack.html"><a href="blackjack.html#card-counting-1"><i class="fa fa-check"></i><b>6.4</b> Card Counting</a><ul>
<li class="chapter" data-level="6.4.1" data-path="blackjack.html"><a href="blackjack.html#hilo-count"><i class="fa fa-check"></i><b>6.4.1</b> Hi/Lo Count</a></li>
<li class="chapter" data-level="6.4.2" data-path="blackjack.html"><a href="blackjack.html#acefive-count"><i class="fa fa-check"></i><b>6.4.2</b> Ace/Five Count</a></li>
<li class="chapter" data-level="6.4.3" data-path="blackjack.html"><a href="blackjack.html#continuous-shuffling-machines-csms"><i class="fa fa-check"></i><b>6.4.3</b> Continuous Shuffling Machines (CSMs)</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="7" data-path="other-games.html"><a href="other-games.html"><i class="fa fa-check"></i><b>7</b> Other Games</a></li>
<li class="chapter" data-level="8" data-path="chutes-and-ladders.html"><a href="chutes-and-ladders.html"><i class="fa fa-check"></i><b>8</b> Chutes and Ladders</a><ul>
<li class="chapter" data-level="8.1" data-path="chutes-and-ladders.html"><a href="chutes-and-ladders.html#overview-3"><i class="fa fa-check"></i><b>8.1</b> Overview</a></li>
<li class="chapter" data-level="8.2" data-path="chutes-and-ladders.html"><a href="chutes-and-ladders.html#markov-processes-and-chains"><i class="fa fa-check"></i><b>8.2</b> Markov Processes and Chains</a></li>
<li class="chapter" data-level="8.3" data-path="chutes-and-ladders.html"><a href="chutes-and-ladders.html#statistics"><i class="fa fa-check"></i><b>8.3</b> Statistics</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="war.html"><a href="war.html"><i class="fa fa-check"></i><b>9</b> War</a><ul>
<li class="chapter" data-level="9.1" data-path="war.html"><a href="war.html#overview-4"><i class="fa fa-check"></i><b>9.1</b> Overview</a></li>
<li class="chapter" data-level="9.2" data-path="war.html"><a href="war.html#simulation-1"><i class="fa fa-check"></i><b>9.2</b> Simulation</a></li>
<li class="chapter" data-level="9.3" data-path="war.html"><a href="war.html#results"><i class="fa fa-check"></i><b>9.3</b> Results</a></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Gambling Statistics</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="problem-of-points" class="section level1">
<h1><span class="header-section-number">2</span> Problem of Points</h1>
<div id="overview-1" class="section level2">
<h2><span class="header-section-number">2.1</span> Overview</h2>
<p>My brother once told me about a story from the early days of probability theory. It involved Blaise Pascal and Pierre de Fermat writing letters to each other in 1654 about how to settle a theoretical game that was prematurely ended before a winner could be declared. In one variation of the game, two gamblers have each wagered 32 pistoles (gold pieces) in a game where the first person to win 3 rounds wins. Each player has a 50/50 chance of winning each round, but the game is prematurely ended at a point where one player has 2 wins and the other has 1 win. The problem is: what is the fairest way to divide the 64 pistoles?</p>
<p>This question of how to divide the winnings of an unfinished game is called “the problem of points” or “the division of the stakes”. There is a good Wikipedia article on it <a href="https://en.wikipedia.org/wiki/Problem_of_points">here</a>. It is mentioned that a naive solution such as “divide the winnings based on the proportion each player has won so far” is flawed because a player who has won only a single game will get the entire reward if his opponent has not won at all. This will be true even if there are many games left to play such that the overall advantage the first player has won is negligible.</p>
<p>Intuitively, it is reasoned that the answer must be based on the number of games left to play and the relative advantage one player has over the other. For instance, in a game to 10, if the first player has won 7 times and the second player has won 5 times, the situation is essentially the same as a game to 20 where the first player has 17 and the second has 15. In each case the first player needs to win 5 games to win and the second player needs to win 7. These are the numbers that intuitively should matter and the division of winnings should be the same in both of these scenarios.</p>
</div>
<div id="solution" class="section level2">
<h2><span class="header-section-number">2.2</span> Solution</h2>
<p>The solution can be found by exploring every possible way that the remaining games could be played out and seeing how many of these result in each player winning. This was the method that Fermat used in his solution. We can write a simple recursive function in Python to compute this:</p>
<pre><code>def get_expected_value(p1_wins, p2_wins, goal):
    &quot;&quot;&quot;Return the probability that player 1 wins given that player 1 currently
    has p1_wins and player 2 has p2_wins and that the game is won when they
    reach &quot;goal&quot; number of wins.
    &quot;&quot;&quot;

    if (p1_wins == goal):
        return 1
    elif (p2_wins == goal):
        return 0

    p1 = get_expected_value(p1_wins + 1, p2_wins, goal)
    p2 = get_expected_value(p1_wins, p2_wins + 1, goal)

    return (p1 + p2) / 2</code></pre>
<p>This yields the following solutions for some of the cases we have discussed:</p>
<table>
<thead>
<tr class="header">
<th align="left">P1 Wins</th>
<th align="left">P2 Wins</th>
<th align="left">Goal</th>
<th align="right">Pr(P1 Wins All)</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">7</td>
<td align="left">5</td>
<td align="left">10</td>
<td align="right">77.34375%</td>
</tr>
<tr class="even">
<td align="left">17</td>
<td align="left">15</td>
<td align="left">20</td>
<td align="right">77.34375%</td>
</tr>
<tr class="odd">
<td align="left">2</td>
<td align="left">1</td>
<td align="left">3</td>
<td align="right">75%</td>
</tr>
<tr class="even">
<td align="left">5</td>
<td align="left">3</td>
<td align="left">6</td>
<td align="right">87.5%</td>
</tr>
</tbody>
</table>
<p>In general, you can also use the following equation to find the probability of player 1 winning if player 1 has <span class="math inline">\(s_1\)</span> rounds left to win and player 2 has <span class="math inline">\(s_2\)</span> rounds left to win where <span class="math inline">\(p_1\)</span> is the probability of player 1 winning a game and <span class="math inline">\(p_2\)</span> is the probability of player 2 winning:</p>
<p><span class="math display">\[ \sum\limits_{k=s_1}^{s_1+s_2-1}{\frac{s_1+s_2-1}{k}(p_{1})^{k}(p_{2})^{s_1+s_2-1-k}} \]</span></p>
</div>
<div id="inferring-a-players-advantage" class="section level2">
<h2><span class="header-section-number">2.3</span> Inferring a Player’s Advantage</h2>
<p>In the classical form of the problem, we assume that each player has an equal chance of winning a round, but what if that was not the case? If we are playing to 1,000 and one player has won 750 times to the other player’s 100, should we infer that the first player is actually better than the second and more likely to win future matches?</p>
<p>This problem is essentially identical to the coin flipping problem. We want to estimate the probability of each player winning future rounds based on their past performance. We can use the maximum likelihood estimate that simply uses the percentage of past wins as the predictor of future probabilities. We could also start with a Bayesian prior and update that based upon the observed data. In this case there are an infinite number of ways to setup the prior probabilities, and thus an infinite number of ways to solve this problem based upon not only the observed data but our prior expectations about how fairly matched the players are.</p>
</div>
<div id="historical-notes" class="section level2">
<h2><span class="header-section-number">2.4</span> Historical Notes</h2>
<p>The actual text of the letters between Pascal and Fermat can be found <a href="https://www.york.ac.uk/depts/maths/histstat/pascal.pdf">here</a>. There is also a good overview in the American Physical Society’s article “This Month in Physics History” subtitled “July 1654: Pascal’s Letters to Fermat on the Problem of Points”(Volume 18, Number 7, July 2009). This goes into more detail about how the problem was first proposed in 1494 by an Italian monk named Luca Paccioli. The question was being pondered in 1654 by an amateur mathematician who enjoyed gambling named Antoine Gombaud. It was Gombaud who asked his friend Pascal, who also had taken an interest in gambling, and it was this question that spurred the letters.</p>
<p>The original question that Paccioli asked concerned a game of “balla”, which requires six goals to win the game, shoul d be settled if the game is stopped when one player has 5 goals and the other has 3.</p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="flipping-a-coin.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="roulette.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["gambling-stats.pdf", "gambling-stats.epub"],
"toc": {
"collapse": "section"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
